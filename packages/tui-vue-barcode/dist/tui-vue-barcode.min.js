(function(e,t){'object'==typeof exports&&'undefined'!=typeof module?module.exports=t():'function'==typeof define&&define.amd?define(t):e.tuiVueBarcode=t()})(this,function(){'use strict';function e(e){return t(o(e))}function t(e){return F[e].toString(2)}function a(e){return U[e]}function o(e){return U.indexOf(e)}function n(e){for(var t=0,a=0;a<e.length;a++)t+=o(e[a]);return t%=43,t}function i(e,t){var a=t?'[\0-_\xC8-\xCF]':'[ -\x7F\xC8-\xCF]',o=e.match(new RegExp('^('+a+'+?)(([0-9]{2}){2,})([^0-9]|$)'));if(o)return o[1]+'\xCC'+r(e.substring(o[1].length));var n=e.match(new RegExp('^'+a+'+'))[0];return n.length===e.length?e:n+X(t?205:206)+i(e.substring(n.length),!t)}function r(e){var t=q(e),a=t.length;if(a===e.length)return e;e=e.substring(a);var o=Y(e)>=Z(e);return t+X(o?206:205)+i(e,o)}function d(e){var t,a=0;for(t=1;11>t;t+=2)a+=parseInt(e[t]);for(t=0;11>t;t+=2)a+=3*parseInt(e[t]);return(10-a%10)%10}function l(e,t){for(var a,o=parseInt(e[e.length-1]),n=ve[o],r='',l=0,s=0;s<n.length;s++)a=n[s],r+='X'===a?e[l++]:a;return r=''+t+r,''+r+d(r)}function s(e){for(var t=0,a=0;13>a;a++)t+=parseInt(e[a])*(3-2*(a%2));return 10*R(t/10)-t}function p(e,t){for(var a=0;a<t;a++)e='0'+e;return e}function g(e){for(var t,a=0,o=0;o<e.length;o++)t=parseInt(e[o]),a+=0==(o+e.length)%2?t:2*t%10+C(2*t/10);return(10-a%10)%10}function u(e){for(var t,a=0,o=[2,3,4,5,6,7],r=0;r<e.length;r++)t=parseInt(e[e.length-1-r]),a+=o[r%o.length]*t;return(11-a%11)%11}function c(e){function t(e){if(Array.isArray(e))for(var o=0;o<e.length;o++)t(e[o]);else e.text=e.text||'',e.data=e.data||'',a.push(e)}var a=[];return t(e),a}function h(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e}function f(e){var t=['width','height','textMargin','fontSize','margin','marginTop','marginBottom','marginLeft','marginRight'];for(var a in t)t.hasOwnProperty(a)&&(a=t[a],'string'==typeof e[a]&&(e[a]=parseInt(e[a],10)));return'string'==typeof e.displayValue&&(e.displayValue='false'!=e.displayValue),e}function y(e){var t={};for(var a in Xe)Xe.hasOwnProperty(a)&&(e.hasAttribute('jsbarcode-'+a.toLowerCase())&&(t[a]=e.getAttribute('jsbarcode-'+a.toLowerCase())),e.hasAttribute('data-'+a.toLowerCase())&&(t[a]=e.getAttribute('data-'+a.toLowerCase())));return t.value=e.getAttribute('jsbarcode-value')||e.getAttribute('data-value'),t=f(t),t}function _(e,t){return t.height+(t.displayValue&&0<e.text.length?t.fontSize+t.textMargin:0)+t.marginTop+t.marginBottom}function v(e,t,a){if(a.displayValue&&t<e){if('center'==a.textAlign)return C((e-t)/2);if('left'==a.textAlign)return 0;if('right'==a.textAlign)return C(e-t)}return 0}function x(e,t,a){for(var o=0;o<e.length;o++){var n,r=e[o],d=Re(t,r.options);n=d.displayValue?E(r.text,d,a):0;var l=r.data.length*d.width;r.width=R(Math.max(n,l)),r.height=_(r,d),r.barcodePadding=v(n,l,d)}}function m(e){for(var t=0,a=0;a<e.length;a++)t+=e[a].width;return t}function O(e){for(var t=0,a=0;a<e.length;a++)e[a].height>t&&(t=e[a].height);return t}function E(e,t,a){var o;if(a)o=a;else if('undefined'!=typeof document)o=document.createElement('canvas').getContext('2d');else return 0;o.font=t.fontOptions+' '+t.fontSize+'px '+t.font;var n=o.measureText(e).width;return n}function b(e){if('string'==typeof e)return L(e);if(Array.isArray(e)){for(var t=[],a=0;a<e.length;a++)t.push(b(e[a]));return t}if('undefined'!=typeof HTMLCanvasElement&&e instanceof HTMLImageElement)return k(e);if(e&&'svg'===e.nodeName||'undefined'!=typeof SVGElement&&e instanceof SVGElement)return{element:e,options:y(e),renderer:Be.SVGRenderer};if('undefined'!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement)return{element:e,options:y(e),renderer:Be.CanvasRenderer};if(e&&e.getContext)return{element:e,renderer:Be.CanvasRenderer};if(e&&'object'===('undefined'==typeof e?'undefined':z(e))&&!e.nodeName)return{element:e,renderer:Be.ObjectRenderer};throw new De}function L(e){var t=document.querySelectorAll(e);if(0!==t.length){for(var a=[],o=0;o<t.length;o++)a.push(b(t[o]));return a}}function k(e){var t=document.createElement('canvas');return{element:t,options:y(e),renderer:Be.CanvasRenderer,afterRender:function(){e.setAttribute('src',t.toDataURL())}}}function w(e,t){je.prototype[t]=je.prototype[t.toUpperCase()]=je.prototype[t.toLowerCase()]=function(a,o){var n=this;return n._errorHandler.wrapBarcodeCall(function(){o.text='undefined'==typeof o.text?void 0:''+o.text;var i=Re(n._options,o);i=f(i);var r=e[t],d=P(a,r,i);return n._encodings.push(d),n})}}function P(e,t,a){e=''+e;var o=new t(e,a);if(!o.valid())throw new Me(o.constructor.name,e);var n=o.encode();n=c(n);for(var r=0;r<n.length;r++)n[r].options=Re(a,n[r].options);return n}function A(){return Ce.CODE128?'CODE128':Object.keys(Ce)[0]}function S(e,t,a){t=c(t);for(var o=0;o<t.length;o++)t[o].options=Re(a,t[o].options),h(t[o].options);h(a);var n=e.renderer,r=new n(e.element,t,a);r.render(),e.afterRender&&e.afterRender()}var G,C=Math.floor,R=Math.ceil,X=String.fromCharCode,z='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},T=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},V=function(){function e(e,t){for(var a,o=0;o<t.length;o++)a=t[o],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),B=function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e},M=Object.assign||function(e){for(var t,a=1;a<arguments.length;a++)for(var o in t=arguments[a],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},D=function e(t,a,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,o)}if('value'in n)return n.value;var r=n.get;return void 0===r?void 0:r.call(o)},I=function(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},N=function(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e},j=function e(t,a){T(this,e),this.data=t,this.text=a.text||t,this.options=a},H=function(t){function o(e,t){return T(this,o),e=e.toUpperCase(),t.mod43&&(e+=a(n(e))),N(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t))}return I(o,t),V(o,[{key:'encode',value:function(){for(var t=e('*'),a=0;a<this.data.length;a++)t+=e(this.data[a])+'0';return t+=e('*'),{data:t,text:this.text}}},{key:'valid',value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),o}(j),U=['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','-','.',' ','$','/','+','%','*'],F=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770],$=(G={},B(G,103,0),B(G,104,1),B(G,105,2),G),J={101:0,100:1,99:2},W=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],Q=function(e){function t(e,a){T(this,t);var o=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.substring(1),a));return o.bytes=e.split('').map(function(e){return e.charCodeAt(0)}),o}return I(t,e),V(t,[{key:'valid',value:function(){return /^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:'encode',value:function(){var e=this.bytes,a=e.shift()-105,o=$[a];if(void 0===o)throw new RangeError('The encoding does not start with a start character.');!0===this.shouldEncodeAsEan128()&&e.unshift(207);var n=t.next(e,1,o);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,''):this.text,data:t.getBar(a)+n.result+t.getBar((n.checksum+a)%103)+t.getBar(106)}}},{key:'shouldEncodeAsEan128',value:function(){var e=this.options.ean128||!1;return'string'==typeof e&&(e='true'===e.toLowerCase()),e}}],[{key:'getBar',value:function(e){return W[e]?W[e].toString():''}},{key:'correctIndex',value:function(e,t){if(0===t){var a=e.shift();return 32>a?a+64:a-32}return 1===t?e.shift()-32:10*(e.shift()-48)+e.shift()-48}},{key:'next',value:function(e,a,o){if(!e.length)return{result:'',checksum:0};var n,i;if(200<=e[0]){i=e.shift()-105;var r=J[i];void 0===r?((0===o||1===o)&&98===i&&(e[0]=0===o?95<e[0]?e[0]-96:e[0]:32>e[0]?e[0]+96:e[0]),n=t.next(e,a+1,o)):n=t.next(e,a+1,r)}else i=t.correctIndex(e,o),n=t.next(e,a+1,o);var d=t.getBar(i),l=i*a;return{result:d+n.result,checksum:l+n.checksum}}}]),t}(j),Y=function(e){return e.match(/^[\0-_È-Ï]*/)[0].length},Z=function(e){return e.match(/^[ -È-Ï]*/)[0].length},q=function(e){return e.match(/^(Ï*[0-9]{2}Ï*)*/)[0]},K=function(e){var t=void 0,a=q(e).length;if(2<=a)t='\xD2'+r(e);else{var o=Y(e)>Z(e);t=(o?'\xD0':'\xD1')+i(e,o)}return t.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(e,t){return'\xCB'+t})},ee=function(e){function t(e,a){if(T(this,t),/^[\x00-\x7F\xC8-\xD3]+$/.test(e))var o=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,K(e),a));else var o=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return N(o)}return I(t,e),t}(Q),te=function(e){function t(e,a){return T(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,'\xD0'+e,a))}return I(t,e),V(t,[{key:'valid',value:function(){return /^[\0-_È-Ï]+$/.test(this.data)}}]),t}(Q),ae=function(e){function t(e,a){return T(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,'\xD1'+e,a))}return I(t,e),V(t,[{key:'valid',value:function(){return /^[ -È-Ï]+$/.test(this.data)}}]),t}(Q),oe=function(e){function t(e,a){return T(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,'\xD2'+e,a))}return I(t,e),V(t,[{key:'valid',value:function(){return /^(Ï*[0-9]{2}Ï*)+$/.test(this.data)}}]),t}(Q),ne={L:['0001101','0011001','0010011','0111101','0100011','0110001','0101111','0111011','0110111','0001011'],G:['0100111','0110011','0011011','0100001','0011101','0111001','0000101','0010001','0001001','0010111'],R:['1110010','1100110','1101100','1000010','1011100','1001110','1010000','1000100','1001000','1110100'],O:['0001101','0011001','0010011','0111101','0100011','0110001','0101111','0111011','0110111','0001011'],E:['0100111','0110011','0011011','0100001','0011101','0111001','0000101','0010001','0001001','0010111']},ie=['LL','LG','GL','GG'],re=['GGLLL','GLGLL','GLLGL','GLLLG','LGGLL','LLGGL','LLLGG','LGLGL','LGLLG','LLGLG'],de=['LLLLLL','LLGLGG','LLGGLG','LLGGGL','LGLLGG','LGGLLG','LGGGLL','LGLGLG','LGLGGL','LGGLGL'],le=function(e,t,a){var o=e.split('').map(function(e,a){return ne[t[a]]}).map(function(t,a){return t?t[e[a]]:''});if(a){var n=e.length-1;o=o.map(function(e,t){return t<n?e+a:e})}return o.join('')},se=function(e){function t(e,a){T(this,t);var o=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return o.fontSize=!a.flat&&a.fontSize>10*a.width?10*a.width:a.fontSize,o.guardHeight=a.height+o.fontSize/2+a.textMargin,o}return I(t,e),V(t,[{key:'encode',value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:'leftText',value:function(e,t){return this.text.substr(e,t)}},{key:'leftEncode',value:function(e,t){return le(e,t)}},{key:'rightText',value:function(e,t){return this.text.substr(e,t)}},{key:'rightEncode',value:function(e,t){return le(e,t)}},{key:'encodeGuarded',value:function(){var e={fontSize:this.fontSize},t={height:this.guardHeight};return[{data:'101',options:t},{data:this.leftEncode(),text:this.leftText(),options:e},{data:'01010',options:t},{data:this.rightEncode(),text:this.rightText(),options:e},{data:'101',options:t}]}},{key:'encodeFlat',value:function(){var e=['101',this.leftEncode(),'01010',this.rightEncode(),'101'];return{data:e.join(''),text:this.text}}}]),t}(j),pe=function(e){var t=e.substr(0,12).split('').map(function(e){return+e}).reduce(function(e,t,a){return a%2?e+3*t:e+t},0);return(10-t%10)%10},ge=function(e){function t(e,a){T(this,t),-1!==e.search(/^[0-9]{12}$/)&&(e+=pe(e));var o=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return o.lastChar=a.lastChar,o}return I(t,e),V(t,[{key:'valid',value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===pe(this.data)}},{key:'leftText',value:function(){return D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'leftText',this).call(this,1,6)}},{key:'leftEncode',value:function(){var e=this.data.substr(1,6),a=de[this.data[0]];return D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'leftEncode',this).call(this,e,a)}},{key:'rightText',value:function(){return D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'rightText',this).call(this,7,6)}},{key:'rightEncode',value:function(){var e=this.data.substr(7,6);return D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'rightEncode',this).call(this,e,'RRRRRR')}},{key:'encodeGuarded',value:function(){var e=D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'encodeGuarded',this).call(this);return this.options.displayValue&&(e.unshift({data:'000000000000',text:this.text.substr(0,1),options:{textAlign:'left',fontSize:this.fontSize}}),this.options.lastChar&&(e.push({data:'00'}),e.push({data:'00000',text:this.options.lastChar,options:{fontSize:this.fontSize}}))),e}}]),t}(se),ue=function(e){var t=e.substr(0,7).split('').map(function(e){return+e}).reduce(function(e,t,a){return a%2?e+t:e+3*t},0);return(10-t%10)%10},ce=function(e){function t(e,a){return T(this,t),-1!==e.search(/^[0-9]{7}$/)&&(e+=ue(e)),N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a))}return I(t,e),V(t,[{key:'valid',value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===ue(this.data)}},{key:'leftText',value:function(){return D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'leftText',this).call(this,0,4)}},{key:'leftEncode',value:function(){var e=this.data.substr(0,4);return D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'leftEncode',this).call(this,e,'LLLL')}},{key:'rightText',value:function(){return D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'rightText',this).call(this,4,4)}},{key:'rightEncode',value:function(){var e=this.data.substr(4,4);return D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'rightEncode',this).call(this,e,'RRRR')}}]),t}(se),he=function(e){var t=e.split('').map(function(e){return+e}).reduce(function(e,t,a){return a%2?e+9*t:e+3*t},0);return t%10},fe=function(e){function t(e,a){return T(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a))}return I(t,e),V(t,[{key:'valid',value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:'encode',value:function(){var e=re[he(this.data)];return{data:'1011'+le(this.data,e,'01'),text:this.text}}}]),t}(j),ye=function(e){function t(e,a){return T(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a))}return I(t,e),V(t,[{key:'valid',value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:'encode',value:function(){var e=ie[parseInt(this.data)%4];return{data:'1011'+le(this.data,e,'01'),text:this.text}}}]),t}(j),_e=function(e){function t(e,a){T(this,t),-1!==e.search(/^[0-9]{11}$/)&&(e+=d(e));var o=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return o.displayValue=a.displayValue,o.fontSize=a.fontSize>10*a.width?10*a.width:a.fontSize,o.guardHeight=a.height+o.fontSize/2+a.textMargin,o}return I(t,e),V(t,[{key:'valid',value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==d(this.data)}},{key:'encode',value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:'flatEncoding',value:function(){var e='';return e+='101',e+=le(this.data.substr(0,6),'LLLLLL'),e+='01010',e+=le(this.data.substr(6,6),'RRRRRR'),e+='101',{data:e,text:this.text}}},{key:'guardedEncoding',value:function(){var e=[];return this.displayValue&&e.push({data:'00000000',text:this.text.substr(0,1),options:{textAlign:'left',fontSize:this.fontSize}}),e.push({data:'101'+le(this.data[0],'L'),options:{height:this.guardHeight}}),e.push({data:le(this.data.substr(1,5),'LLLLL'),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),e.push({data:'01010',options:{height:this.guardHeight}}),e.push({data:le(this.data.substr(6,5),'RRRRR'),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),e.push({data:le(this.data[11],'R')+'101',options:{height:this.guardHeight}}),this.displayValue&&e.push({data:'00000000',text:this.text.substr(11,1),options:{textAlign:'right',fontSize:this.fontSize}}),e}}]),t}(j),ve=['XX00000XXX','XX10000XXX','XX20000XXX','XXX00000XX','XXXX00000X','XXXXX00005','XXXXX00006','XXXXX00007','XXXXX00008','XXXXX00009'],xe=[['EEEOOO','OOOEEE'],['EEOEOO','OOEOEE'],['EEOOEO','OOEEOE'],['EEOOOE','OOEEEO'],['EOEEOO','OEOOEE'],['EOOEEO','OEEOOE'],['EOOOEE','OEEEOO'],['EOEOEO','OEOEOE'],['EOEOOE','OEOEEO'],['EOOEOE','OEEOEO']],me=function(e){function t(e,a){T(this,t);var o=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));if(o.isValid=!1,-1!==e.search(/^[0-9]{6}$/))o.middleDigits=e,o.upcA=l(e,'0'),o.text=a.text||''+o.upcA[0]+e+o.upcA[o.upcA.length-1],o.isValid=!0;else{if(-1===e.search(/^[01][0-9]{7}$/))return N(o);if(o.middleDigits=e.substring(1,e.length-1),o.upcA=l(o.middleDigits,e[0]),o.upcA[o.upcA.length-1]===e[e.length-1])o.isValid=!0;else return N(o)}return o.displayValue=a.displayValue,o.fontSize=a.fontSize>10*a.width?10*a.width:a.fontSize,o.guardHeight=a.height+o.fontSize/2+a.textMargin,o}return I(t,e),V(t,[{key:'valid',value:function(){return this.isValid}},{key:'encode',value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:'flatEncoding',value:function(){var e='';return e+='101',e+=this.encodeMiddleDigits(),e+='010101',{data:e,text:this.text}}},{key:'guardedEncoding',value:function(){var e=[];return this.displayValue&&e.push({data:'00000000',text:this.text[0],options:{textAlign:'left',fontSize:this.fontSize}}),e.push({data:'101',options:{height:this.guardHeight}}),e.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),e.push({data:'010101',options:{height:this.guardHeight}}),this.displayValue&&e.push({data:'00000000',text:this.text[7],options:{textAlign:'right',fontSize:this.fontSize}}),e}},{key:'encodeMiddleDigits',value:function(){var e=this.upcA[0],t=this.upcA[this.upcA.length-1],a=xe[parseInt(t)][parseInt(e)];return le(this.middleDigits,a)}}]),t}(j),Oe=function(e){function t(e,a){T(this,t),-1!==e.search(/^[0-9]{13}$/)&&(e+=s(e));var o=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return o.binaryRepresentation={0:'00110',1:'10001',2:'01001',3:'11000',4:'00101',5:'10100',6:'01100',7:'00011',8:'10010',9:'01010'},o}return I(t,e),V(t,[{key:'valid',value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&this.data[13]==s(this.data)}},{key:'encode',value:function(){for(var e='1010',t=0;14>t;t+=2)e+=this.calculatePair(this.data.substr(t,2));return e+='11101',{data:e,text:this.text}}},{key:'calculatePair',value:function(e){for(var t='',a=this.binaryRepresentation[e[0]],o=this.binaryRepresentation[e[1]],n=0;5>n;n++)t+='1'==a[n]?'111':'1',t+='1'==o[n]?'000':'0';return t}}]),t}(j),Ee=function(e){function t(e,a){T(this,t);var o=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return o.binaryRepresentation={0:'00110',1:'10001',2:'01001',3:'11000',4:'00101',5:'10100',6:'01100',7:'00011',8:'10010',9:'01010'},o}return I(t,e),V(t,[{key:'valid',value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:'encode',value:function(){for(var e='1010',t=0;t<this.data.length;t+=2)e+=this.calculatePair(this.data.substr(t,2));return e+='11101',{data:e,text:this.text}}},{key:'calculatePair',value:function(e){for(var t='',a=this.binaryRepresentation[e[0]],o=this.binaryRepresentation[e[1]],n=0;5>n;n++)t+='1'==a[n]?'111':'1',t+='1'==o[n]?'000':'0';return t}}]),t}(j),be=function(e){function t(e,a){return T(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a))}return I(t,e),V(t,[{key:'encode',value:function(){for(var e='110',t=0;t<this.data.length;t++){var a=parseInt(this.data[t]),o=a.toString(2);o=p(o,4-o.length);for(var n=0;n<o.length;n++)e+='0'==o[n]?'100':'110'}return e+='1001',{data:e,text:this.text}}},{key:'valid',value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),t}(j),Le=function(e){function t(e,a){return T(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+g(e),a))}return I(t,e),t}(be),ke=function(e){function t(e,a){return T(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+u(e),a))}return I(t,e),t}(be),we=function(e){function t(e,a){return T(this,t),e+=g(e),e+=g(e),N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a))}return I(t,e),t}(be),Pe=function(e){function t(e,a){return T(this,t),e+=u(e),e+=g(e),N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a))}return I(t,e),t}(be),Ae=function(e){function t(e,a){T(this,t);var o=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return o.number=parseInt(e,10),o}return I(t,e),V(t,[{key:'encode',value:function(){for(var e=this.number,t='';!isNaN(e)&&0!=e;)0==e%2?(t='11100'+t,e=(e-2)/2):(t='100'+t,e=(e-1)/2);return t=t.slice(0,-2),{data:t,text:this.text}}},{key:'valid',value:function(){return 3<=this.number&&131070>=this.number}}]),t}(j),Se=function(e){function t(e,a){T(this,t),0===e.search(/^[0-9\-\$\:\.\+\/]+$/)&&(e='A'+e+'A');var o=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.toUpperCase(),a));return o.text=o.options.text||o.text.replace(/[A-D]/g,''),o}return I(t,e),V(t,[{key:'valid',value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:'encode',value:function(){for(var e=[],t=this.getEncodings(),a=0;a<this.data.length;a++)e.push(t[this.data.charAt(a)]),a!==this.data.length-1&&e.push('0');return{text:this.text,data:e.join('')}}},{key:'getEncodings',value:function(){return{0:'101010011',1:'101011001',2:'101001011',3:'110010101',4:'101101001',5:'110101001',6:'100101011',7:'100101101',8:'100110101',9:'110100101',"-":'101001101',$:'101100101',":":'1101011011',"/":'1101101011',".":'1101101101',"+":'101100110011',A:'1011001001',B:'1001001011',C:'1010010011',D:'1010011001'}}}]),t}(j),Ge=function(e){function t(e,a){return T(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a))}return I(t,e),V(t,[{key:'encode',value:function(){return{data:'10101010101010101010101010101010101010101',text:this.text}}},{key:'valid',value:function(){return!0}}]),t}(j),Ce={CODE39:H,CODE128:ee,CODE128A:te,CODE128B:ae,CODE128C:oe,EAN13:ge,EAN8:ce,EAN5:fe,EAN2:ye,UPC:_e,UPCE:me,ITF14:Oe,ITF:Ee,MSI:be,MSI10:Le,MSI11:ke,MSI1010:we,MSI1110:Pe,pharmacode:Ae,codabar:Se,GenericBarcode:Ge},Re=function(e,t){return M({},e,t)},Xe={width:2,height:100,format:'auto',displayValue:!0,fontOptions:'',font:'monospace',text:void 0,textAlign:'center',textPosition:'bottom',textMargin:2,fontSize:20,background:'#ffffff',lineColor:'#000000',margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}},ze=function(){function e(t,a,o){T(this,e),this.canvas=t,this.encodings=a,this.options=o}return V(e,[{key:'render',value:function(){if(!this.canvas.getContext)throw new Error('The browser does not support canvas.');this.prepareCanvas();for(var e,t=0;t<this.encodings.length;t++)e=Re(this.options,this.encodings[t].options),this.drawCanvasBarcode(e,this.encodings[t]),this.drawCanvasText(e,this.encodings[t]),this.moveCanvasDrawing(this.encodings[t]);this.restoreCanvas()}},{key:'prepareCanvas',value:function(){var e=this.canvas.getContext('2d');e.save(),x(this.encodings,this.options,e);var t=m(this.encodings),a=O(this.encodings);this.canvas.width=t+this.options.marginLeft+this.options.marginRight,this.canvas.height=a,e.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(e.fillStyle=this.options.background,e.fillRect(0,0,this.canvas.width,this.canvas.height)),e.translate(this.options.marginLeft,0)}},{key:'drawCanvasBarcode',value:function(e,t){var a,o=this.canvas.getContext('2d'),n=t.data;a='top'==e.textPosition?e.marginTop+e.fontSize+e.textMargin:e.marginTop,o.fillStyle=e.lineColor;for(var i,r=0;r<n.length;r++)i=r*e.width+t.barcodePadding,'1'===n[r]?o.fillRect(i,a,e.width,e.height):n[r]&&o.fillRect(i,a,e.width,e.height*n[r])}},{key:'drawCanvasText',value:function(e,t){var a=this.canvas.getContext('2d'),o=e.fontOptions+' '+e.fontSize+'px '+e.font;if(e.displayValue){var n,i;i='top'==e.textPosition?e.marginTop+e.fontSize-e.textMargin:e.height+e.textMargin+e.marginTop+e.fontSize,a.font=o,'left'==e.textAlign||0<t.barcodePadding?(n=0,a.textAlign='left'):'right'==e.textAlign?(n=t.width-1,a.textAlign='right'):(n=t.width/2,a.textAlign='center'),a.fillText(t.text,n,i)}}},{key:'moveCanvasDrawing',value:function(e){var t=this.canvas.getContext('2d');t.translate(e.width,0)}},{key:'restoreCanvas',value:function(){var e=this.canvas.getContext('2d');e.restore()}}]),e}(),Te=function(){function e(t,a,o){T(this,e),this.svg=t,this.encodings=a,this.options=o,this.document=o.xmlDocument||document}return V(e,[{key:'render',value:function(){var e=this.options.marginLeft;this.prepareSVG();for(var t=0;t<this.encodings.length;t++){var a=this.encodings[t],o=Re(this.options,a.options),n=this.createGroup(e,o.marginTop,this.svg);this.setGroupOptions(n,o),this.drawSvgBarcode(n,o,a),this.drawSVGText(n,o,a),e+=a.width}}},{key:'prepareSVG',value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);x(this.encodings,this.options);var e=m(this.encodings),t=O(this.encodings),a=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(a,t),this.options.background&&this.drawRect(0,0,a,t,this.svg).setAttribute('style','fill:'+this.options.background+';')}},{key:'drawSvgBarcode',value:function(e,t,a){var o,n=a.data;o='top'==t.textPosition?t.fontSize+t.textMargin:0;for(var i=0,r=0,d=0;d<n.length;d++)r=d*t.width+a.barcodePadding,'1'===n[d]?i++:0<i&&(this.drawRect(r-t.width*i,o,t.width*i,t.height,e),i=0);0<i&&this.drawRect(r-t.width*(i-1),o,t.width*i,t.height,e)}},{key:'drawSVGText',value:function(e,t,a){var o=this.document.createElementNS('http://www.w3.org/2000/svg','text');if(t.displayValue){var n,i;o.setAttribute('style','font:'+t.fontOptions+' '+t.fontSize+'px '+t.font),i='top'==t.textPosition?t.fontSize-t.textMargin:t.height+t.textMargin+t.fontSize,'left'==t.textAlign||0<a.barcodePadding?(n=0,o.setAttribute('text-anchor','start')):'right'==t.textAlign?(n=a.width-1,o.setAttribute('text-anchor','end')):(n=a.width/2,o.setAttribute('text-anchor','middle')),o.setAttribute('x',n),o.setAttribute('y',i),o.appendChild(this.document.createTextNode(a.text)),e.appendChild(o)}}},{key:'setSvgAttributes',value:function(e,t){var a=this.svg;a.setAttribute('width',e+'px'),a.setAttribute('height',t+'px'),a.setAttribute('x','0px'),a.setAttribute('y','0px'),a.setAttribute('viewBox','0 0 '+e+' '+t),a.setAttribute('xmlns','http://www.w3.org/2000/svg'),a.setAttribute('version','1.1'),a.setAttribute('style','transform: translate(0,0)')}},{key:'createGroup',value:function(e,t,a){var o=this.document.createElementNS('http://www.w3.org/2000/svg','g');return o.setAttribute('transform','translate('+e+', '+t+')'),a.appendChild(o),o}},{key:'setGroupOptions',value:function(e,t){e.setAttribute('style','fill:'+t.lineColor+';')}},{key:'drawRect',value:function(e,t,a,o,n){var i=this.document.createElementNS('http://www.w3.org/2000/svg','rect');return i.setAttribute('x',e),i.setAttribute('y',t),i.setAttribute('width',a),i.setAttribute('height',o),n.appendChild(i),i}}]),e}(),Ve=function(){function e(t,a,o){T(this,e),this.object=t,this.encodings=a,this.options=o}return V(e,[{key:'render',value:function(){this.object.encodings=this.encodings}}]),e}(),Be={CanvasRenderer:ze,SVGRenderer:Te,ObjectRenderer:Ve},Me=function(e){function t(e,a){T(this,t);var o=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.name='InvalidInputException',o.symbology=e,o.input=a,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return I(t,e),t}(Error),De=function(e){function t(){T(this,t);var e=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name='InvalidElementException',e.message='Not supported type to render on',e}return I(t,e),t}(Error),Ie=function(e){function t(){T(this,t);var e=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name='NoElementException',e.message='No element to render on.',e}return I(t,e),t}(Error),Ne=function(){function e(t){T(this,e),this.api=t}return V(e,[{key:'handleCatch',value:function(t){if('InvalidInputException'!==t.name)throw t;else if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw t.message;this.api.render=function(){}}},{key:'wrapBarcodeCall',value:function(e){try{var t=e.apply(void 0,arguments);return this.api._options.valid(!0),t}catch(t){return this.handleCatch(t),this.api}}}]),e}(),je=function(){},He=function(e,t,a){var o=new je;if('undefined'==typeof e)throw Error('No element to render on was provided.');return o._renderProperties=b(e),o._encodings=[],o._options=Xe,o._errorHandler=new Ne(o),'undefined'!=typeof t&&(a=a||{},!a.format&&(a.format=A()),o.options(a)[a.format](t,a).render()),o};for(var Ue in He.getModule=function(e){return Ce[e]},Ce)Ce.hasOwnProperty(Ue)&&w(Ce,Ue);je.prototype.options=function(e){return this._options=Re(this._options,e),this},je.prototype.blank=function(e){var t=Array(e+1).join('0');return this._encodings.push({data:t}),this},je.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var e;for(var t in this._renderProperties){e=this._renderProperties[t];var a=Re(this._options,e.options);'auto'==a.format&&(a.format=A()),this._errorHandler.wrapBarcodeCall(function(){var t=a.value,o=Ce[a.format.toUpperCase()],n=P(t,o,a);S(e,n,a)})}}},je.prototype.render=function(){if(!this._renderProperties)throw new Ie;if(Array.isArray(this._renderProperties))for(var e=0;e<this._renderProperties.length;e++)S(this._renderProperties[e],this._encodings,this._options);else S(this._renderProperties,this._encodings,this._options);return this},je.prototype._defaults=Xe,'undefined'!=typeof window&&(window.JsBarcode=He),'undefined'!=typeof jQuery&&(jQuery.fn.JsBarcode=function(e,t){var a=[];return jQuery(this).each(function(){a.push(this)}),He(a,e,t)});var Fe={name:'barcode',props:{value:{type:[Number,String],default:' '},type:{type:String,default:'canvas'},options:Object},mounted:function(){this.createBarcode()},render:function(e){return e(this.type,this.$slots.default)},methods:{createBarcode:function(){He(this.$el,this.value||' ',this.options)}},watch:{value:function(){this.createBarcode()},options:function(){this.createBarcode()}}};return Fe});
